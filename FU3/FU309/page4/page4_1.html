<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alastair Humphreys - The Journey</title>
    <script src="https://cdn.jsdelivr.net/npm/microsoft-cognitiveservices-speech-sdk@1.34.0/distrib/browser/microsoft.cognitiveservices.speech.sdk.bundle-min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&family=Merriweather:ital@1&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22;
            --glass: rgba(0, 0, 0, 0.5); /* åŠ æ·±èƒŒæ™¯ä»¥æé«˜æ–‡å­—å¯¹æ¯”åº¦ */
            --card-glass: rgba(255, 255, 255, 0.1);
        }

        /* åŸºç¡€é‡ç½® */
        * { box-sizing: border-box; }

        body {
            margin: 0; padding: 0;
            font-family: 'Poppins', sans-serif;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            overflow-y: auto;
            display: flex; justify-content: center; align-items: center;
        }

        /* --- èƒŒæ™¯å›¾å¤„ç† (å…³é”®ä¿®æ”¹) --- */
        .bg-fixed {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('img_alastair_portrait.jpg') no-repeat center center;
            background-size: cover;
            z-index: -2;
            transition: background-position 0.5s ease;
        }

        .overlay-bg {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.4); 
            z-index: -1;
        }

        /* ä¸»å®¹å™¨ */
        .container {
            position: relative; z-index: 10;
            width: 90%; max-width: 1000px;
            background: var(--glass);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            border-radius: 20px;
            padding: 40px;
            padding-bottom: 90px; /* ç•™å‡ºåº•éƒ¨å¯¼èˆªç©ºé—´ */
            border: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            min-height: 600px;
            margin: 20px 0;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: all 0.5s ease;
        }

        .step-section { display: none; width: 100%; text-align: center; }
        .step-active { display: block; animation: fadeIn 0.8s; }

        h1 { font-size: 3rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; line-height: 1.2; text-shadow: 2px 2px 4px black; }
        h2 { font-family: 'Merriweather', serif; color: #f0f0f0; font-weight: 400; margin-bottom: 30px; line-height: 1.5; text-shadow: 1px 1px 2px black; }

        /* è§†é¢‘å®¹å™¨ */
        .video-wrapper {
            width: 100%; max-width: 700px; margin: 0 auto 20px;
            border: 4px solid var(--accent); border-radius: 10px; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            background: black;
            aspect-ratio: 16/9;
            display: flex; align-items: center; justify-content: center;
        }
        video { width: 100%; height: 100%; object-fit: contain; }

        /* å¡ç‰‡å¸ƒå±€ */
        .cards-row {
            display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 20px;
        }

        .achieve-card {
            width: 260px; height: 380px; 
            border-radius: 15px; position: relative; overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.4); 
            transition: transform 0.3s;
        }
        .achieve-card:hover { transform: translateY(-5px); }

        .bg-cycle { background: url('cycling.jpg') center/cover; }
        .bg-row { background: url('rowing.jpg') center/cover; }
        .bg-walk { background: url('desert.jpg') center/cover; }

        .card-inner {
            background: rgba(0,0,0,0.7); 
            height: 100%; width: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            padding: 15px; box-sizing: border-box;
        }

        .card-inner h3 { color: var(--accent); margin: 0 0 15px 0; font-size: 1.4rem; text-shadow: 1px 1px 2px black; }
        
        /* æ¨¡ç³Šç­”æ¡ˆ */
        .blur-answer {
            background: rgba(255,255,255,0.15);
            color: transparent; text-shadow: 0 0 10px rgba(255,255,255,0.9);
            padding: 10px 15px; border-radius: 8px;
            cursor: pointer; margin-top: 5px; border: 1px dashed rgba(255,255,255,0.5);
            transition: 0.3s; user-select: none;
            display: inline-block; font-weight: bold;
        }
        .blur-answer:hover { background: rgba(255,255,255,0.25); text-shadow: 0 0 5px rgba(255,255,255,1); }
        .revealed {
            color: #2ecc71; text-shadow: none; background: rgba(0,0,0,0.8);
            border: 1px solid #2ecc71; font-weight: bold;
            animation: rubberBand 1s;
        }

        /* é—®ç­”éƒ¨åˆ† */
        .qa-box { text-align: left; max-width: 900px; margin: 0 auto; width: 100%; }
        .qa-item {
            background: rgba(0,0,0,0.6); 
            padding: 20px; margin-bottom: 15px; border-radius: 12px;
            display: flex; flex-direction: column;
            align-items: flex-start;
            border-left: 5px solid var(--accent);
        }
        .qa-top-row {
            display: flex; justify-content: space-between; width: 100%; align-items: center; gap: 10px;
        }
        .qa-question { font-size: 1.1rem; flex: 1; font-weight: 500; }
        
        .qa-ans { 
            display: none; color: #f1c40f; font-weight: bold; font-size: 1.15rem; margin-top: 15px; line-height: 1.5;
        }
        
        /* æŒ‰é’® */
        .btn-main {
            background: linear-gradient(45deg, #e67e22, #d35400);
            border: none; color: white; padding: 14px 35px;
            border-radius: 50px; font-size: 1.1rem; cursor: pointer;
            margin-top: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            font-weight: 700; text-shadow: none; white-space: nowrap;
            transition: transform 0.2s;
        }
        .btn-main:hover { transform: scale(1.05); filter: brightness(1.1); }
        .btn-main:active { transform: scale(0.95); }
        
        .btn-reveal { background: #34495e; padding: 6px 18px; font-size: 0.9rem; margin-top:0; border-radius: 20px; }
        .btn-reveal:hover { background: #2c3e50; }

        .tts-icon {
            cursor: pointer; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.5);
            color: white; border-radius: 50%; width: 36px; height: 36px;
            margin-left: 10px; font-size: 1.1rem; vertical-align: middle;
            display: inline-flex; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        .tts-icon:hover { background: var(--accent); border-color: var(--accent); }
        .tts-icon.playing { animation: pulse 1s infinite; background: #27ae60; border-color: #27ae60; }

        .highlight-word {
            font-size: 2.2rem; color: #e74c3c; font-weight: 800;
            text-shadow: 2px 2px 0px black;
            display: inline-block; word-break: break-word;
        }

        /* åº•éƒ¨å¯¼èˆªæ  */
        .nav-bar {
            position: absolute;
            bottom: 25px;
            width: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 20;
        }

        .nav-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 25px;
            border-radius: 30px;
            cursor: pointer;
            transition: 0.3s;
            font-size: 1rem;
            display: flex; align-items: center; gap: 8px;
            backdrop-filter: blur(4px);
        }
        .nav-btn:hover { background: rgba(255,255,255,0.25); transform: translateY(-2px); }
        .nav-btn:disabled { opacity: 0.3; cursor: not-allowed; transform: none; }

        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }

        /* =========================================
           ç§»åŠ¨ç«¯æ·±åº¦é€‚é… (Mobile Media Queries)
           ========================================= */
        @media (max-width: 768px) {
            /* 1. èƒŒæ™¯å›¾ä¿®æ­£ï¼šç«–å±æ—¶èšç„¦å·¦ä¾§1/3 */
            .bg-fixed {
                /* 28% çº¦ç­‰äºå·¦ä¾§ 1/3 çš„è§†è§‰ä¸­å¿ƒï¼Œç¡®ä¿äººç‰©ä¸è¢«åˆ‡æ‰ */
                background-position: 28% center; 
            }

            .container {
                width: 95%;
                padding: 25px 20px;
                padding-bottom: 80px;
                min-height: auto;
                margin-top: 10px;
            }

            h1 { font-size: 2rem; }
            h2 { font-size: 1.2rem; margin-bottom: 20px; }

            /* å¡ç‰‡é€‚é… */
            .achieve-card { width: 100%; height: auto; min-height: 220px; }
            .card-inner { padding: 15px; }

            /* é—®ç­”é€‚é… */
            .qa-item { padding: 15px; }
            .qa-question { font-size: 1rem; }
            .qa-ans { font-size: 1.05rem; }

            /* æŒ‰é’®é€‚é… */
            .btn-main { width: 100%; padding: 12px 0; font-size: 1.1rem; white-space: normal; }
            .nav-bar { width: 92%; bottom: 15px; }
            .nav-btn { padding: 8px 16px; font-size: 0.9rem; }

            /* é‡ç‚¹è¯æ±‡ */
            .highlight-word { font-size: 1.8rem; }
            #big-reveal p { font-size: 1.1rem !important; }
        }
    </style>
</head>
<body>

    <div class="bg-fixed"></div>
    <div class="overlay-bg"></div>

    <div class="container">
        
        <div id="step1" class="step-section step-active">
            <h1 class="animate__animated animate__fadeInDown">
                Alastair Humphreys <button class="tts-icon" onclick="speak('Alastair Humphreys', this)">ğŸ”Š</button>
            </h1>
            <h2 class="animate__animated animate__fadeInUp">
                Recall: Who is he? What does he do?
                <button class="tts-icon" onclick="speak('Who is he? What does he do?', this)">ğŸ”Š</button>
            </h2>
            <button class="btn-main animate__animated animate__pulse animate__infinite" onclick="goToStep(2)">
                Watch Video to Recall ğŸ¬
            </button>
        </div>

<div id="step2" class="step-section">
    <div id="video-wrapper-1" class="video-wrapper">
        <video id="mainVideo" controls playsinline preload="metadata">
            <source src="intro.mp4" type="video/mp4">
            <p style="color:red; background:white; padding:10px;">Video not supported or 502 Error.</p>
        </video>
    </div>
    <p>Playing 0:00 - 0:33</p>
    <button class="btn-main" id="btnAfterVid1" style="display:none" onclick="goToStep(3)">
        Check Achievements ğŸ‘‰
    </button>
</div>

        <div id="step3" class="step-section">
            <h2>What achievements did he complete?</h2>
            <div class="cards-row">
                <div class="achieve-card bg-cycle animate__animated animate__fadeInUp">
                    <div class="card-inner">
                        <h3>Cycling the World</h3>
                        <p>How long did he spend?</p>
                        <div class="blur-answer" onclick="reveal(this, '4 Years')">????</div>
                        <p style="margin-top:10px;">What distance?</p>
                        <div class="blur-answer" onclick="reveal(this, '46,000 Miles')">??????</div>
                        <p style="margin-top:10px;">How many countries?</p>
                        <div class="blur-answer" onclick="reveal(this, '60 Countries')">?? ?????????</div>
                    </div>
                </div>

                <div class="achieve-card bg-row animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                    <div class="card-inner">
                        <h3>Rowing</h3>
                        <p>Across which ocean?</p>
                        <div class="blur-answer" onclick="reveal(this, 'Atlantic Ocean')">?????? ???</div>
                    </div>
                </div>

                <div class="achieve-card bg-walk animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                    <div class="card-inner">
                        <h3>Walking</h3>
                        <p>Walked through where?</p>
                        <div class="blur-answer" onclick="reveal(this, 'Hot Deserts')">???????</div>
                    </div>
                </div>
            </div>
            <button class="btn-main" style="margin-top:30px;" onclick="goToStep(4)">
                Summarize His Style ğŸ¤”
            </button>
        </div>

        <div id="step4" class="step-section">
            <h2>What kind of adventure does he like?</h2>
            <p style="font-size:1.2rem;">Big adventure or small adventure?</p>
            <div id="big-reveal" style="display:none; margin-top:20px; border: 2px solid var(--accent); padding:20px; border-radius:10px; background: rgba(0,0,0,0.6);">
                <p style="font-style:italic; margin-bottom:10px;">"He wasn't always talking about small trips."</p>
                <p style="color: #f1c40f; font-size:1.3rem; font-weight:bold;">
                    "He loved these BIG challenges in wild places." 
                    <button class="tts-icon" onclick="speak('He loved these big challenges in wild places', this)">ğŸ”Š</button>
                </p>
            </div>
            <button id="btnShowBig" class="btn-main" onclick="revealBigAdv()">Show Answer</button>
            <button id="btnNextToProb" class="btn-main" style="display:none; background: linear-gradient(45deg, #2980b9, #3498db);" onclick="goToStep(5)">
                Next: The Problem â¡ï¸
            </button>
        </div>

        <div id="step5" class="step-section">
            <h1 style="color:#e74c3c; text-shadow:1px 1px 0 black;">However, he noticed a problem...</h1>
            <div id="video-wrapper-2" class="video-wrapper">
                </div>
            <p>Playing 0:33 - 1:15</p>
            <button class="btn-main" id="btnAfterVid2" style="display:none" onclick="goToStep(6)">
                Analyze the Problem ğŸ‘‰
            </button>
        </div>

        <div id="step6" class="step-section">
            <h2>Understanding the Problem</h2>
            <div class="qa-box">
                <div class="qa-item animate__animated animate__fadeInUp">
                    <div class="qa-top-row">
                        <span class="qa-question">1. Do people like adventure?</span>
                        <button class="btn-main btn-reveal" onclick="showQA(this)">Show</button>
                    </div>
                    <span class="qa-ans">Yes, they read websites and watch films about it, thinking they would love to do it.</span>
                </div>
                <div class="qa-item animate__animated animate__fadeInUp" style="animation-delay:0.1s">
                    <div class="qa-top-row">
                        <span class="qa-question">2. Do people start easily?</span>
                        <button class="btn-main btn-reveal" onclick="showQA(this)">Show</button>
                    </div>
                    <span class="qa-ans" style="color:#e74c3c">No. There are so many things that stop people from crossing oceans or walking across deserts.</span>
                </div>
                <div class="qa-item animate__animated animate__fadeInUp" style="animation-delay:0.2s">
                    <div class="qa-top-row">
                        <span class="qa-question">3. What is the biggest problem?</span>
                        <button class="btn-main btn-reveal" onclick="showQA(this)">Show</button>
                    </div>
                    <span class="qa-ans">The biggest problem is people don't know how to even start an adventure.</span>
                </div>
                <div class="qa-item animate__animated animate__fadeInUp" style="animation-delay:0.3s">
                    <div class="qa-top-row">
                        <span class="qa-question">4. Which adjective describes it?</span>
                        <button class="btn-main btn-reveal" onclick="showQA(this, true)">Show</button>
                    </div>
                    <span class="qa-ans">
                        <span class="highlight-word">DAUNTING</span>
                        <button class="tts-icon" onclick="speak('Daunting', this)">ğŸ”Š</button>
                    </span>
                </div>
                <div class="qa-item animate__animated animate__fadeInUp" style="animation-delay:0.4s; border-left-color:#2ecc71;">
                    <div class="qa-top-row">
                        <span class="qa-question">5. What is his solution?</span>
                        <button class="btn-main btn-reveal" onclick="showQA(this)">Show</button>
                    </div>
                    <span class="qa-ans" style="color:#2ecc71">He thought to himself: "What if I make it easy and short?" So there would be no excuse. That is the concept of Micro-adventure.</span>
                </div>
            </div>
        </div>

        <div class="nav-bar">
            <button id="btnPrev" class="nav-btn" onclick="moveStep(-1)">â® Previous</button>
            <button id="btnNext" class="nav-btn" onclick="moveStep(1)">Next â¯</button>
        </div>

    </div>

    <script>
        // --- 1. Azure Speech SDK Configuration ---
        const azureKey = "DKRXk8ueSfo5NdIOMqFRTCAfpeGDezJ3Snf5K8gGgtyqxiWdugLzJQQJ99BLACHYHv6XJ3w3AAAYACOGUYP9"; 
        const azureRegion = "eastus2"; 
        let synthesizer = null;
        let activeBtn = null;

        // åˆå§‹åŒ– SDK
        function initSpeechSDK() {
            if (typeof SpeechSDK !== 'undefined' && azureKey && azureRegion) {
                const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(azureKey, azureRegion);
                // è®¾ç½®é«˜å“è´¨ç¥ç»è¯­éŸ³
                speechConfig.speechSynthesisVoiceName = "en-US-JennyNeural"; 
                synthesizer = new SpeechSDK.SpeechSynthesizer(speechConfig);
            }
        }

        window.onload = function() {
            initSpeechSDK();
            // åˆå§‹åŒ–è§†é¢‘æŒ‰é’®çŠ¶æ€
            updateNavButtons();
        };

        // ç»Ÿä¸€æ’­æ”¾é€»è¾‘
        function speak(text, btnElement) {
            // è§†è§‰åé¦ˆ
            if(btnElement) {
                activeBtn = btnElement;
                activeBtn.classList.add('playing');
            }

            // åœæ­¢å½“å‰æ’­æ”¾
            if (synthesizer) {
                try { synthesizer.close(); } catch(e) {}
                synthesizer = null;
            }
            window.speechSynthesis.cancel(); // åœæ­¢åŸç”Ÿè¯­éŸ³

            try {
                if (typeof SpeechSDK === 'undefined') throw new Error("SDK not loaded");
                
                const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(azureKey, azureRegion);
                speechConfig.speechSynthesisVoiceName = "en-US-JennyNeural";
                const audioConfig = SpeechSDK.AudioConfig.fromDefaultSpeakerOutput();
                synthesizer = new SpeechSDK.SpeechSynthesizer(speechConfig, audioConfig);

                synthesizer.speakTextAsync(
                    text,
                    result => {
                        if (result.reason !== SpeechSDK.ResultReason.SynthesizingAudioCompleted) {
                            console.warn("Azure TTS canceled/failed.");
                            browserSpeak(text, btnElement); // é™çº§
                        }
                        if(activeBtn) activeBtn.classList.remove('playing');
                        synthesizer.close();
                        synthesizer = null;
                    },
                    error => {
                        console.error("Azure error: " + error);
                        browserSpeak(text, btnElement); // é™çº§
                    }
                );
            } catch (e) {
                browserSpeak(text, btnElement);
            }
        }

        // æµè§ˆå™¨åŸç”Ÿè¯­éŸ³ (å¤‡ç”¨)
        function browserSpeak(text, btnElement) {
            window.speechSynthesis.cancel();
            const ut = new SpeechSynthesisUtterance(text);
            ut.lang = 'en-US';
            ut.rate = 0.9;
            ut.onend = () => { if(activeBtn) activeBtn.classList.remove('playing'); };
            window.speechSynthesis.speak(ut);
        }

        // --- è§†é¢‘ä¸æ­¥éª¤é€»è¾‘ ---
        const video = document.getElementById('mainVideo');
        const wrapper1 = document.getElementById('video-wrapper-1');
        const wrapper2 = document.getElementById('video-wrapper-2');
        let currentStep = 1;
        const totalSteps = 6;

        function moveStep(direction) {
            let nextStep = currentStep + direction;
            if (nextStep >= 1 && nextStep <= totalSteps) {
                goToStep(nextStep);
            } else if (currentStep === totalSteps && direction === 1) {
                // è·³è½¬åˆ° Part 2
                window.location.href = 'page4_2.html';
            }
        }

        function updateNavButtons() {
            document.getElementById('btnPrev').disabled = (currentStep === 1);
            
            const btnNext = document.getElementById('btnNext');
            if (currentStep === totalSteps) {
                btnNext.disabled = false;
                btnNext.innerHTML = 'Go to Part 2 â¯';
                btnNext.style.backgroundColor = '#27ae60';
                btnNext.style.borderColor = '#27ae60';
            } else {
                btnNext.disabled = false;
                btnNext.innerHTML = 'Next â¯';
                btnNext.style.backgroundColor = ''; 
                btnNext.style.borderColor = ''; 
            }
            
            // åˆ‡æ¢æ­¥éª¤æ—¶æ»šå›é¡¶éƒ¨
            document.querySelector('.container').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function goToStep(stepNum) {
            if(window.videoCheckInterval) clearInterval(window.videoCheckInterval);
            
            document.querySelectorAll('.step-section').forEach(el => el.classList.remove('step-active'));
            document.getElementById('step' + stepNum).classList.add('step-active');
            
            currentStep = stepNum;
            updateNavButtons();

            // è§†é¢‘é€»è¾‘æ§åˆ¶
            if(stepNum === 2) {
                wrapper1.appendChild(video);
                video.currentTime = 0;
                let playPromise = video.play();
                if (playPromise !== undefined) playPromise.catch(e => console.log("Autoplay blocked"));
                checkVideoTime(33, 'btnAfterVid1');
            } 
            else if(stepNum === 5) {
                wrapper2.appendChild(video);
                video.currentTime = 33;
                let playPromise = video.play();
                if (playPromise !== undefined) playPromise.catch(e => console.log("Autoplay blocked"));
                checkVideoTime(75, 'btnAfterVid2');
            }
            else {
                video.pause();
            }
        }

        function checkVideoTime(endTime, btnId) {
            if(window.videoCheckInterval) clearInterval(window.videoCheckInterval);
            window.videoCheckInterval = setInterval(() => {
                if(!video.paused && video.currentTime >= endTime) {
                    video.pause();
                    document.getElementById(btnId).style.display = 'inline-block';
                    clearInterval(window.videoCheckInterval);
                }
            }, 500);
        }

        // --- äº¤äº’åŠŸèƒ½ ---
        function reveal(el, text) {
            if(!el.classList.contains('revealed')) {
                el.innerText = text;
                el.classList.remove('blur-answer');
                el.classList.add('revealed');
                speak(text);
            }
        }

        function revealBigAdv() {
            document.getElementById('big-reveal').style.display = 'block';
            document.getElementById('big-reveal').classList.add('animate__animated', 'animate__zoomIn');
            document.getElementById('btnShowBig').style.display = 'none';
            document.getElementById('btnNextToProb').style.display = 'inline-block';
            speak("He loved these big challenges in wild places.");
        }

        function showQA(btn, isDaunting = false) {
            const topRow = btn.parentElement;
            const ans = topRow.nextElementSibling;
            
            ans.style.display = 'block';
            ans.classList.add('animate__animated', 'animate__fadeInLeft');
            btn.style.display = 'none';
            
            if(isDaunting) speak('Daunting');
            else speak(ans.innerText);
        }
    </script>
</body>
</html>