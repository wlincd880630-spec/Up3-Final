<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explore: Britain (Pro)</title>
    
    <script src="https://cdn.staticfile.net/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdn.staticfile.net/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.staticfile.net/babel-standalone/7.22.17/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/microsoft-cognitiveservices-speech-sdk/distrib/browser/microsoft.cognitiveservices.speech.sdk.bundle-min.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Noto+Serif:ital,wght@0,500;1,500&display=swap" rel="stylesheet">

    <style>
        /* ÂÖ®Â±ÄËÆæÁΩÆ */
        * { -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Outfit', sans-serif; 
            color: #f8fafc; 
            /* ÁöáÂÆ∂ÊûÅÂÖâËÉåÊôØ */
            background: linear-gradient(135deg, #020617, #1e1b4b, #1e3a8a, #312e81);
            background-size: 400% 400%;
            animation: royalFlow 30s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        @keyframes royalFlow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        .serif { font-family: 'Noto Serif', serif; }

        /* ‰∏ªÂÆπÂô® */
        .app-container {
            width: 95vw;
            max-width: 1400px;
            height: 90vh;
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 32px;
            box-shadow: 0 25px 60px -12px rgba(0, 0, 0, 0.6);
            display: flex;
            flex-direction: row;
            overflow: hidden;
            position: relative;
        }
        
        /* ÁßªÂä®Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            .app-container { flex-direction: column; height: 100vh; width: 100vw; border-radius: 0; }
        }

        /* Âä®Áîª */
        .fade-in { animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* ÊªöÂä®Êù° */
        .custom-scroll { overflow-y: auto; scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.2) transparent; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 10px; }

        /* ÊªëÂùó */
        input[type=range] {
            -webkit-appearance: none; width: 100%; background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 28px; width: 28px; border-radius: 50%;
            background: #60a5fa; border: 4px solid white; cursor: pointer; margin-top: -12px;
            box-shadow: 0 0 15px rgba(96, 165, 250, 0.6); transition: transform 0.1s;
        }
        input[type=range]::-webkit-slider-thumb:active { transform: scale(1.2); }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 6px; cursor: pointer; 
            background: rgba(255,255,255,0.2); border-radius: 10px;
        }

        /* ÊôØÁÇπÈÄâÊã©ÊåâÈíÆ */
        .loc-btn {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: #94a3b8; border-radius: 12px; padding: 12px; font-weight: 600; font-size: 0.9rem;
            transition: all 0.2s; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 6px;
            cursor: pointer;
        }
        .loc-btn:hover { background: rgba(255,255,255,0.1); color: white; }
        .loc-btn.active { background: #2563eb; color: white; border-color: #3b82f6; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4); transform: scale(1.02); }

        /* ËøîÂõûÊåâÈíÆ */
        .nav-back { 
            position: absolute; top: 24px; left: 24px; z-index: 50; 
            background: rgba(0,0,0,0.6); color: white; 
            padding: 10px 20px; border-radius: 99px; text-decoration: none; 
            backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.2); 
            font-weight: 600; font-size: 1rem;
            transition: all 0.2s; display: flex; align-items: center; gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .nav-back:hover { background: rgba(0,0,0,0.8); transform: scale(1.05); }
    </style>
</head>
<body>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // üîπ Azure ËØ≠Èü≥ÈÖçÁΩÆ
        // ==========================================
        const azureKey = "DKRXk8ueSfo5NdIOMqFRTCAfpeGDezJ3Snf5K8gGgtyqxiWdugLzJQQJ99BLACHYHv6XJ3w3AAAYACOGUYP9";
        const azureRegion = "eastus2"; 
        
        let currentSynthesizer = null;

        const speak = (text) => {
            if (currentSynthesizer) { currentSynthesizer.close(); currentSynthesizer = null; }
            if (!text) return;
            
            try {
                const speechConfig = SpeechSDK.SpeechConfig.fromSubscription(azureKey, azureRegion);
                speechConfig.speechSynthesisVoiceName = "en-US-JennyNeural"; 
                const audioConfig = SpeechSDK.AudioConfig.fromDefaultSpeakerOutput();
                const synthesizer = new SpeechSDK.SpeechSynthesizer(speechConfig, audioConfig);
                currentSynthesizer = synthesizer;
                
                synthesizer.speakTextAsync(text, result => {
                    synthesizer.close(); currentSynthesizer = null;
                }, err => { console.error(err); synthesizer.close(); currentSynthesizer = null; });
            } catch (e) { console.error("Azure Error", e); }
        };

        // ==========================================
        // üîπ ÊôØÁÇπÊï∞ÊçÆ (Landmarks)
        // ==========================================
        const LANDMARKS = [
            {
                id: 'tower',
                icon: 'ph-bridge',
                name: 'Tower Bridge',
                imgs: ['tower_bridge.jpg'],
                en: "Built in 1894, Tower Bridge is a famous suspension bridge in London crossing the River Thames. It opens in the middle to let tall ships pass through.",
                cn: "‰º¶Êï¶Â°îÊ°•Âª∫‰∫é1894Âπ¥ÔºåÊòØÊ®™Ë∑®Ê≥∞Êô§Â£´Ê≤≥ÁöÑËëóÂêçÊÇ¨Á¥¢Ê°•„ÄÇÂÆÉ‰∏≠Èó¥ÂèØ‰ª•ÊâìÂºÄÔºå‰ª•‰æøËÆ©È´òÂ§ßÁöÑËàπÂè™ÈÄöËøá„ÄÇ"
            },
            {
                id: 'museum',
                icon: 'ph-film-strip',
                name: 'Film Museum',
                imgs: ['film_museum.jpg', 'film_museum_01.jpg', 'film_museum_02.jpg', 'film_museum_03.jpg'],
                en: "Located in Covent Garden, the London Film Museum is famous for its collection of original vehicles from the James Bond movies.",
                cn: "‰º¶Êï¶ÁîµÂΩ±ÂçöÁâ©È¶Ü‰Ωç‰∫éÁßëÊñáÁâπËä±Âõ≠Ôºå‰ª•Êî∂ËóèË©πÂßÜÊñØ¬∑ÈÇ¶Âæ∑ÁîµÂΩ±‰∏≠ÁöÑÂéüÂàõËΩ¶ËæÜËÄåÈóªÂêç„ÄÇ"
            },
            {
                id: 'sheekey',
                icon: 'ph-fish',
                name: 'J Sheekey',
                imgs: ['j_sheekey.jpg', 'j_sheekey_01.jpg', 'j_sheekey_02.jpg'],
                en: "J Sheekey is an iconic seafood restaurant in London's West End. It is famous for its delicious fish dishes and its beautiful red exterior.",
                cn: "J SheekeyÊòØ‰º¶Êï¶Ë•øÂå∫‰∏ÄÂÆ∂Ê†áÂøóÊÄßÁöÑÊµ∑È≤úÈ§êÂéÖ„ÄÇÂÆÉ‰ª•ÁæéÂë≥ÁöÑÈ±ºÁ±ªËèúËÇ¥ÂíåÁæé‰∏ΩÁöÑÁ∫¢Ëâ≤Â§ñËßÇËÄåÈóªÂêç„ÄÇ"
            },
            {
                id: 'garden',
                icon: 'ph-park',
                name: 'Leicester Sq',
                imgs: ['leicester_square.jpg', 'leicester_square_01.jpg'],
                en: "This square is the heart of London's entertainment district. It hosts film premieres and has statues of famous characters like Paddington Bear.",
                cn: "Ëøô‰∏™ÂπøÂú∫ÊòØ‰º¶Êï¶Â®±‰πêÂå∫ÁöÑ‰∏≠ÂøÉ„ÄÇÂÆÉ‰∏æÂäûÁîµÂΩ±È¶ñÊò†ÂºèÔºåÂπ∂Êã•ÊúâÂ∏ï‰∏ÅÈ°øÁÜäÁ≠âËëóÂêçËßíËâ≤ÁöÑÈõïÂÉè„ÄÇ"
            },
            {
                id: 'gallery',
                icon: 'ph-paint-brush',
                name: 'National Gallery',
                imgs: ['national_gallery.jpg', 'national_gallery_01.jpg'],
                en: "Situated in Trafalgar Square, this art museum houses a vast collection of over 2,300 paintings dating from the mid-13th century to 1900.",
                cn: "ËøôÂÆ∂Ëâ∫ÊúØÂçöÁâ©È¶Ü‰Ωç‰∫éÁâπÊãâÊ≥ïÂä†ÂπøÂú∫ÔºåÊî∂Ëóè‰∫Ü‰ªé13‰∏ñÁ∫™‰∏≠Âè∂Âà∞1900Âπ¥ÁöÑ2300Â§öÂπÖÁîª‰Ωú„ÄÇ"
            },
            {
                id: 'palace',
                icon: 'ph-crown',
                name: 'Buckingham Palace',
                imgs: ['buckingham_palace.jpg', 'buckingham_palace_01.jpg', 'buckingham_palace_02.jpg', 'buckingham_palace_03.jpg'],
                en: "Buckingham Palace is the London residence of the British monarch. It is famous for the Changing of the Guard ceremony outside its gates.",
                cn: "ÁôΩÈáëÊ±âÂÆ´ÊòØËã±ÂõΩÂêõ‰∏ªÂú®‰º¶Êï¶ÁöÑ‰ΩèÊâÄ„ÄÇÂÆÉ‰ª•Â§ßÈó®Â§ñÁöÑÂç´ÂÖµÊç¢Â≤ó‰ª™ÂºèËÄåÈóªÂêç„ÄÇ"
            }
        ];

        // ==========================================
        // üîπ ÁªÑ‰ª∂Âå∫Âüü
        // ==========================================

        const App = () => {
            const [activeId, setActiveId] = useState('tower');
            const [focusVal, setFocusVal] = useState(0);
            const [imgIdx, setImgIdx] = useState(0);
            const [isUnlocked, setIsUnlocked] = useState(false);
            const [showDetails, setShowDetails] = useState(false);

            const activeItem = LANDMARKS.find(l => l.id === activeId);

            // ÂºïÂØºËØ≠Èü≥
            useEffect(() => {
                setTimeout(() => speak("Let's select a landmark and adjust the camera focus."), 1000);
            }, []);

            // ÂàáÊç¢Âú∞ÁÇπÈáçÁΩÆÁä∂ÊÄÅ
            const switchLocation = (id) => {
                setActiveId(id);
                setFocusVal(0);
                setImgIdx(0);
                setIsUnlocked(false);
                setShowDetails(false);
            };

            // ÁõëÂê¨ÊªëÂùó
            const handleSliderChange = (e) => {
                const val = parseInt(e.target.value);
                setFocusVal(val);
                if (val > 90 && !isUnlocked) {
                    setIsUnlocked(true);
                    speak(`Focus locked! This is ${activeItem.name}.`);
                    setTimeout(() => setShowDetails(true), 1200);
                }
            };

            // ÂàáÊç¢ÂõæÁâá
            const changeImage = (dir) => {
                const total = activeItem.imgs.length;
                let next = imgIdx + dir;
                if (next >= total) next = 0;
                if (next < 0) next = total - 1;
                setImgIdx(next);
            };

            const blurAmount = Math.max(0, 20 - (focusVal / 4));

            return (
                <div className="app-container fade-in">
                    
                    {/* 1. Â∑¶‰æßÔºöÁõ∏Êú∫ÂèñÊôØÂô® */}
                    <div className="flex-1 md:flex-[1.8] relative bg-black overflow-hidden border-b-4 md:border-b-0 md:border-r-4 border-slate-700/50 group h-[40vh] md:h-auto">
                        <a href="FU303Main.html" className="nav-back">
                            <i className="ph ph-arrow-u-up-left text-xl"></i> Back to Map
                        </a>

                        {/* ÂõæÁâáÂ±Ç */}
                        <div className="w-full h-full relative">
                            {/* ÂõæÁâáÂØºËà™ÁÆ≠Â§¥ (‰ªÖÂΩìÊúâÂ§öÂº†ÂõæÊó∂ÊòæÁ§∫) */}
                            {activeItem.imgs.length > 1 && (
                                <>
                                    <button onClick={() => changeImage(-1)} className="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/70 backdrop-blur-sm z-30 transition hover:scale-110 border border-white/20">
                                        <i className="ph ph-caret-left text-2xl"></i>
                                    </button>
                                    <button onClick={() => changeImage(1)} className="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-black/40 text-white flex items-center justify-center hover:bg-black/70 backdrop-blur-sm z-30 transition hover:scale-110 border border-white/20">
                                        <i className="ph ph-caret-right text-2xl"></i>
                                    </button>
                                    {/* È°µÁ†ÅÊåáÁ§∫Âô® */}
                                    <div className="absolute bottom-20 left-1/2 -translate-x-1/2 bg-black/50 px-3 py-1 rounded-full text-xs font-mono text-white/80 backdrop-blur-sm z-30">
                                        IMG {imgIdx + 1}/{activeItem.imgs.length}
                                    </div>
                                </>
                            )}

                            <img 
                                key={`${activeId}-${imgIdx}`}
                                src={activeItem.imgs[imgIdx]} 
                                className="w-full h-full object-cover transition-all duration-500"
                                style={{ 
                                    filter: `blur(${blurAmount}px) brightness(${0.5 + (focusVal/200)})`,
                                    transform: `scale(${1.1 - (focusVal/1000)})` 
                                }}
                                onError={(e) => e.target.src = `https://placehold.co/1200x800/1e1b4b/ffffff?text=${activeItem.name}`}
                            />
                        </div>

                        {/* Áõ∏Êú∫ UI Ë¶ÜÁõñÂ±Ç */}
                        <div className="absolute inset-0 pointer-events-none p-8 flex flex-col justify-between z-10">
                            <div className="flex justify-between items-start">
                                <div className="text-red-500 font-mono font-bold animate-pulse flex items-center gap-3 bg-black/40 px-3 py-1 rounded backdrop-blur-sm">
                                    <div className="w-3 h-3 bg-red-500 rounded-full shadow-[0_0_10px_red]"></div> REC
                                </div>
                                <div className="text-white/80 font-mono text-sm flex flex-col items-end gap-1">
                                    <span>ISO 400</span>
                                    <span>F/2.8</span>
                                    <span className="text-blue-400">AF-S</span>
                                </div>
                            </div>
                            
                            {/* ÂØπÁÑ¶Ê°Ü */}
                            <div className={`absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition-all duration-300 ${isUnlocked ? 'w-full h-full border-4 border-green-500/50' : 'w-64 h-48 border-2 border-white/30'}`}>
                                {!isUnlocked && (
                                    <>
                                        <div className="absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-white"></div>
                                        <div className="absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-white"></div>
                                        <div className="absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-white"></div>
                                        <div className="absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-white"></div>
                                        <div className="w-2 h-2 bg-white/50 rounded-full absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></div>
                                    </>
                                )}
                                {isUnlocked && <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-green-400 font-black tracking-widest text-2xl animate-ping opacity-50">LOCKED</div>}
                            </div>

                            <div className="flex justify-between items-end text-white/60 font-mono text-sm">
                                <div>LONDON, UK</div>
                                <div className={`${focusVal > 90 ? 'text-green-400 font-bold' : 'text-white'}`}>FOCUS: {focusVal}%</div>
                            </div>
                        </div>
                    </div>

                    {/* 2. Âè≥‰æßÔºöÊéßÂà∂Èù¢Êùø */}
                    <div className="flex-1 bg-slate-900/60 backdrop-blur-3xl border-l border-white/5 relative flex flex-col h-[60vh] md:h-auto overflow-hidden">
                        
                        <div className="absolute inset-0 overflow-y-auto custom-scroll p-6 md:p-10">
                            <div className="min-h-full flex flex-col items-center">
                                
                                {/* ÊôØÁÇπÈÄâÊã©Âô® (Grid) */}
                                <div className="grid grid-cols-2 gap-3 w-full mb-8">
                                    {LANDMARKS.map(item => (
                                        <button 
                                            key={item.id}
                                            onClick={() => switchLocation(item.id)}
                                            className={`loc-btn ${activeId === item.id ? 'active' : ''}`}
                                        >
                                            <i className={`ph ${item.icon} text-2xl`}></i>
                                            {item.name}
                                        </button>
                                    ))}
                                </div>

                                <div className="mb-8 w-full text-center">
                                    <h2 className="text-slate-400 font-bold uppercase tracking-[0.2em] text-xs mb-3">Camera Control</h2>
                                    <div className="bg-blue-500/10 text-blue-200 px-4 py-3 rounded-xl border border-blue-500/20 inline-block font-medium shadow-lg w-full text-sm">
                                        <i className="ph ph-aperture mr-2 align-middle"></i> "Adjust focus to reveal details."
                                    </div>
                                </div>

                                <div className="w-full max-w-sm mb-10 relative group">
                                    <div className="flex justify-between text-xs text-slate-400 mb-2 font-mono tracking-widest">
                                        <span>BLUR</span><span>SHARP</span>
                                    </div>
                                    <input 
                                        type="range" min="0" max="100" value={focusVal} onChange={handleSliderChange} disabled={isUnlocked}
                                        className={`w-full h-2 rounded-lg appearance-none cursor-pointer transition-all ${isUnlocked ? 'bg-green-500/50' : 'bg-slate-700 group-hover:bg-slate-600'}`}
                                    />
                                </div>

                                {/* Ëß£ÈîÅÂêéÂÜÖÂÆπ */}
                                {isUnlocked ? (
                                    <div className="w-full fade-in flex flex-col items-center">
                                        <div className="mb-4 text-center">
                                            <h1 className="text-3xl font-black text-white mb-2 drop-shadow-sm">{activeItem.name}</h1>
                                            <button onClick={() => speak(activeItem.name)} className="text-blue-300 hover:text-white transition"><i className="ph ph-speaker-high text-2xl"></i></button>
                                        </div>

                                        <div className="bg-gradient-to-b from-white/10 to-white/5 p-6 rounded-2xl border border-white/10 text-left shadow-2xl w-full relative overflow-hidden group hover:border-white/20 transition-all">
                                            <p className="serif text-lg text-blue-50 mb-4 leading-relaxed">"{activeItem.en}"</p>
                                            <div className="h-px w-full bg-white/10 my-3"></div>
                                            <p className="text-slate-400 text-sm mb-4 leading-relaxed">{activeItem.cn}</p>
                                            <div className="text-right">
                                                <button onClick={() => speak(activeItem.en)} className="px-5 py-2 rounded-full bg-blue-600 hover:bg-blue-500 flex items-center justify-center text-white shadow-lg transition gap-2 ml-auto font-bold text-sm">
                                                    <i className="ph ph-speaker-high text-lg"></i> Read Info
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="text-slate-500 flex flex-col items-center gap-2 mt-4 opacity-60">
                                        <i className="ph ph-lock-key-open text-4xl"></i>
                                        <span className="text-xs font-mono tracking-widest uppercase">Locked</span>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>

                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>